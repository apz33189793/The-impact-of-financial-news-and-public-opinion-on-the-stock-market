# The-impact-of-financial-news-and-public-opinion-on-the-stock-market

Train Naive Bayes Classifier by financial news and gossip

#主題: 探討財經新聞觀點與散戶輿論與大盤指數之連動關係

詳細說明請參考副檔:Introduction

## 檔案介紹：

        main：完整程式之代碼（函Tkinder UI介面）

        crawler：各網站爬蟲代碼

        naivebayes_classify_model：訓練的模型

        dict & TFIDF：自訂辭典+字詞重要程度

        Dataset：爬蟲取得之資料集

        result_by_Tkinder：程式執行後之預覽


##　專案目的: 探討財經新聞論點與散戶看法和台股大盤加權指數之連動關係，並嘗試做出以言論風向預測大盤的預測指標

![圖片1](https://user-images.githubusercontent.com/71583821/157134265-9f9e99c3-b948-400a-bedc-8de6f9c015a9.png)



## 指標模型的運作方式: 利用財經新聞、專家意見、股民的看法，綜合這三方面的言論做出預測明日大盤加權指數的漲跌模型。

![運作流程](https://user-images.githubusercontent.com/71583821/157134339-81a10e9f-93de-4905-89e6-4feb1f3a08cd.png)



# 製作原理


# 製作方法:

每天利用網路爬蟲，利用關鍵字，爬取開盤前預測性質的財經新聞與大型權值股以及開盤前財經論壇中股民的預測性留言，其中預測性質的財經新聞除了客觀的以目前經濟局勢來推估明日漲跌外，另外有些新聞則是以分析師的言論作為新聞主軸來預測明日漲跌，因此只要針對新聞以及言論進行爬蟲，即可獲得三方的看法。

![圖片2](https://user-images.githubusercontent.com/71583821/157134672-87102df2-3d9b-4cab-a822-5416c5c4246e.png)




利用Tkinder將程式包裝成介面，方便使用

# 模型訓練:
將爬取下來的新聞與言論標註情感正負標籤，再利用貝氏分類法訓練模型。

![分類器訓練](https://user-images.githubusercontent.com/71583821/157134721-d27a615a-4b06-49fc-a940-127b4a1b3a92.png)


採用貝式分類學習，透過將標註完情感標籤的資料進行訓練，用以判斷並計算今日的新聞面看漲或看跌比率以及股民輿論看漲與看跌比率。最後訓練出的模型準確率約為85%，意即有85%的機率能夠正確判斷出正負向新聞或輿論。




# 製作邏輯:

經新聞是大多數股民得知股市現況的方便工具，其中這些新聞包含了對財經現況的分析以及專家的看法，而不可否認的是，確實有許多股民會參考這些新聞來買股票，且深信不疑，因此我們將正向(預測未來會漲)的新聞視為與加權指數正相關，另外我們也加入了一般股民的意見作為參考，來增加指標預測模型的準確性；先驗知識告訴我們散戶不管在哪一年總是輸錢的機率比較多，因此在分析散戶的預測言論時，我們將散戶的預測言論與加權指數的關係定義為負相關，以此來增加指標的有效性。
![輸出圖表](https://user-images.githubusercontent.com/71583821/157134540-a092597b-b381-4f9d-b5f6-5bab932ea5fb.png)


# 經濟價值:

許多股民在考慮進場時機時會透過財經新聞來判斷股市的熱度，已考慮進場時機，然而大部分的人可能因為工作或課業較繁忙而難以空出時間慢慢地上網去查詢相關新聞並分析新聞的內容，因此這個程式可以幫助這些人省去查詢、以及整理資料的工作，省去了不少時間，此外了解言論與指數之連動關係亦可以讓投資人多一個投資前參考指標。
![功能](https://user-images.githubusercontent.com/71583821/157134403-b3bc0669-86aa-48c9-a366-332bfdbe3449.png)



# 使用範例:
![使用說明](https://user-images.githubusercontent.com/71583821/157134454-8cf62408-2210-495d-a972-4bbb628e6092.png)





# 指標模型限制:

在相關新聞輿論方面，我們沒辦法去過濾出哪些具有刻意帶風向，或者是具有偏頗言論，意圖讓主力出貨給散戶惡意新聞，這些新聞不但會影響模型的有效性，更會影響股民的權益，為了解決這種偏誤風險，我們只能盡可能增加資料量，以及透過人工篩選的方式確保資料集的品質及代表性。

 有些個股太過冷門導致討論聲量過小，因此可能無法預測
 

# 資料集(dataset):

利用爬蟲，爬取以下網站之新聞及留言:

1-1. https://news.cnyes.com/tag/%E7%9B%A4%E5%89%8D?exp=a 鉅亨盤前新聞

1-2. https://www.chinatimes.com/Search/%E7%9B%A4%E5%89%8D?chdtv 中時盤前新聞

1-3. https://tw.stock.yahoo.com/tw-market Yahoo財經-台股盤勢

1-4. https://www.cmoney.tw/follow/channel/stock-TWA00?chart=d&type=Feed CMONEY_股市爆料同學會_加權指數 (TWA00)_相關新聞

1-5. https://pchome.megatime.com.tw/magazine/list/invest/5 PChone股市


# 後續研究建議:

由於大部分之新聞標題就已經清楚表達內文之大意，故爬蟲我們只爬取新聞標題的部分，此舉不僅能大幅減少資料之雜訊，也可以讓Jeiba更精確斷詞。

以人工方式為每一筆資料加註情感標籤，增加資料集品質

爬取大量財經新聞網可以增加數據量亦可減少選擇性偏誤

將權值股新聞與大盤新聞進行合併增加資料量

使用股民言論的部分只使用CMONEY的論壇，而不使用ptt_stock或Dcard，其原因為ptt主要討論的幾乎是個股的看法，與我們的主題不契合，再者CMONEY有針對大盤加權指數設立專屬的討論區，因此整理資料時比較方便。

其他詳細部分請參考副檔之Introduction.pdf
